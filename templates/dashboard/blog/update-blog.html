{% extends "layouts/base.html" %}
{% load static %}

{% block messages %}
{% if messages %}
    <div class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 ">
        {% for message in messages %}
        <div id="toast-success" class="flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800" role="alert">
            <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200">
                <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
                </svg>
                <span class="sr-only">Check icon</span>
            </div>
            <div class="ms-3 text-sm font-normal">{{message}}</div>
            <button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700" data-dismiss-target="#toast-success" aria-label="Close">
                <span class="sr-only">Close</span>
                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                </svg>
            </button>
        </div>
        {% endfor %}
    </div>
{% endif %}
{% endblock messages %}


{% block content %}


<form method="post" class="max-w-5xl mx-auto my-5 bg-white dark:bg-gray-800 p-5 rounded-lg" enctype="multipart/form-data" id=>
    {% csrf_token %}
    <h2 class="text-2xl font-bold pb-3 dark:text-white">Update Blog</h2>
    <div class="grid grid-cols-2 gap-4 py-6">
        {{ form.media }}
        {% for field in form %}
            {% if field.label|lower == "thumbnail" %}
                <div class="col-span-2">{% include "includes/image-input.html" with field=field %}</div>
            {% elif field.label|lower == "video" %}
                <div class="col-span-2">
                    <label for="{{ field.name }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ field.label }}</label>
                    {{ field }}
                </div>
                <div id="video-preview-container" class="hidden col-span-2">
                    <iframe id="videoPreview" class="w-full h-80 object-cover rounded-lg mb-3" src="#" frameborder="0" allowfullscreen></iframe>
                </div>
            {% else %}
                <div class="col-span-2">
                    <label for="{{ field.name }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ field.label }}</label>
                    {{ field }}
                </div>
            {% endif %}
        {% endfor %}
    </div>
    <div class="flex items-center py-4 md:py-5 border-t border-gray-200 rounded-b dark:border-gray-600">
      
        <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Update</button>
        <a href="#" type="button" class="py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700">Cancel</a>
    </div>
</form>


{% endblock content %}

{% block extra_js %}

<script src="{% static "dist/js/preview-input.js" %}"></script>



<script>
    document.getElementById('blog-form').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission
    
        // Show a toast notification
        showToast('Blog updated successfully!', 'success');
    
        // Submit the form
        this.submit();
    });
    
    function showToast(message, type) {
        // Create the toast element
        const toast = document.createElement('div');
        toast.classList.add('toast', `toast-${type}`, 'fixed', 'bottom-4', 'left-4', 'z-50', 'px-4', 'py-2', 'rounded-lg', 'shadow-lg', 'text-white');
        toast.textContent = message;
    
        // Add the toast to the DOM
        document.body.appendChild(toast);
    
        // Remove the toast after a few seconds
        setTimeout(function() {
            toast.remove();
        }, 3000);
    }
    </script>

{% endblock extra_js %}